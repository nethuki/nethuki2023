<!DOCTYPE html>
<html>
  <head>
    <title>Payment Page</title>
    <style>
      /* styles.css */

      /* Global styles */
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f2f2f2;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      .header {
        background-color: rgb(224, 81, 172);
        color: #000000;
        padding: 9px;
     /*   text-align: center;*/
      }

      h1 {
        margin: 0;
      }

      form {
       
        background-color: rgb(243, 220, 235);
        padding: 30px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      h2 {
        margin-top: 0;
        margin-bottom: 20px;
      }

      .button{
    background-color: rgb(129, 14, 108);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    padding: 5px 15px;
    /* align-items: center; */
  }
  button a{
    text-decoration: none;
    color: rgb(0, 0, 0);
  } 
  button:hover{
    background-color: rgb(94, 0, 58);

  }

      .label {
        display: block;
        font-weight: bold;
        margin-bottom: 5px;
      }

      .input-group {
        margin-bottom: 20px;
      }

      .input-group label {
        display: inline-block;
        width: 120px;
      }

      .input-group input[type="date"],
      .input-group select,
      .input-group input[type="number"] {
        width: 200px;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      .table-container {
        margin-bottom: 20px;
        overflow-x: auto;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 0;
        padding: 0;
      }

      thead th {
        background-color: rgb(246, 110, 196);
        color: #060606;
        padding: 10px;
        text-align: left;
      }

      tbody td {
        padding: 10px;
        border-bottom: 1px solid #ddd;
      }

      tfoot td {
        font-weight: bold;
      }

      .total-row td:first-child {
        text-align: right;
      }

      .checkout-button {
        display: block;
        width: 100%;
        padding: 10px;
        background-color: rgb(224, 81, 172);
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
        margin-top: 20px;
      }

      .checkout-button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
      }

      .footer {
        background-color:  rgb(249, 165, 218);
        color: #949191;
        padding: 10px;
        text-align: center;
        margin-top: 20px;
      }
      .ticket{
          text-align: center;
        }

  /* Add this CSS to your existing styles */
.navbar {
top: 10;
width: 100%;
z-index: 100;
}

.navbar-list {
display: none;
list-style-type: none;
margin: 0;
padding: 0;
position: absolute;
left: 50px;
top: 80px;
border: 3px solid rgb(6, 35, 1);

width: 20%;
/*text-align: center;*/

}

.navbar-list.show {
display: block;
}

.navbar-list li {
padding: 15px 0;
font-size: 20px;
}

.navbar-list a {
color: rgb(9, 62, 13);
text-decoration: none;
display: block;
}

.navbar-toggle {
cursor: pointer;
padding: 5px;
float:l;
}

.bar {
width: 30px;
height: 2px;
background-color: rgb(1, 1, 1);
margin: 6px 0;
transition: 0.4s;
}

body{
          background-image: url("./ASTERIA\ -\ SOLD.jpeg");
          background-size: cover;
          background-position: center;          
      }
      /* Responsive styles */
      @media (max-width: 600px) {
        .input-group label {
          width: 100%;
          display: block;
          margin-bottom: 5px;
        }

        .input-group input[type="date"],
        .input-group select,
        .input-group input[type="number"] {
          width: 100%;
        }
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.min.css"
    />
  </head>
  <body>
    <div class="container">
      <header class="header">
        <button class= "button" onclick="confirm('Are you Sure')" ><a href="detail-page.html">BACK </a> </button>
        <h1 class="ticket">Ticket Booking</h1>

        <nav class="navbar">
          <div class="navbar-toggle" onclick="toggleNav()">
              <div class="bar"></div>
              <div class="bar"></div>
              <div class="bar"></div>
          </div>
          <ul class="navbar-list" id="navbarList">
              <li><a href="hikkaduwa-turtle-hatchery.html">Home</a></li>
              <li><a href="index 2.html">Tickets</a></li>
              <li><a href="detail-page.html">Details</a></li>
              <li><a href="success-page.html">Payments</a></li>
              <li><a href="confirmation-page.html">Confirmation</a></li>
          </ul>
               </nav>

      </header>
<p></p>
      <h2 class="subheading">Payment details</h2>

      <div class="payment-form">
        <form id="payment-form">
          <div class="input-group">
            <label for="card-number">Card Number:</label>
            <input type="text" id="card-number" required />
          </div>
          <div class="input-group">
            <label for="expiry-date">Expiry Date:</label>
            <input type="text" id="expiry-date" required />
          </div>
          <div class="input-group">
            <label for="cvc">CVC / CVV:</label>
            <input type="text" id="cvc" required />
          </div>
          <div class="input-group">
            <label for="name-on-card">Name on Card:</label>
            <input type="text" id="name-on-card" required />
          </div>
          <button type="submit">Make Payment</button>
        </form>
      </div>
<p></p>

      <h2 class="subheading">Summary</h2>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Date</th>
              <th>Duration</th>
              <th>Ticket Type</th>
              <th>Quantity</th>
              <th>Charges</th>
            </tr>
          </thead>
          <tbody id="summary-table-body">
            <!-- Table rows will be dynamically added here -->
          </tbody>
          <tfoot>
            <tr class="total-row">
              <td colspan="4">Total Amount:</td>
              <td id="total-amount">$0</td>
            </tr>
          </tfoot>
        </table>
      </div>

      <footer class="footer">&copy; 2023 Ticket Booking. All rights reserved.</footer>
    </div>

    <script>
      // Function to retrieve data from local storage
      function retrieveDataFromLocalStorage() {
        const summaryData = localStorage.getItem("summaryData");
        if (summaryData) {
          return JSON.parse(summaryData);
        }
        return [];
      }

      // Function to display summary table based on data retrieved from local storage
      function displaySummaryTable() {
        const summaryData = retrieveDataFromLocalStorage();
        const summaryContainer = document.getElementById("summary-table-body");
        let totalPayable = 0;

        while (summaryContainer.firstChild) {
          summaryContainer.firstChild.remove();
        }

        for (const row of summaryData) {
          const newRow = document.createElement("tr");
          newRow.innerHTML = `
          <td>${row.date}</td>
          <td>${row.duration}</td>
          <td>${row.ticket}</td>
          <td>${row.quantity}</td>
          <td>${row.charges}</td>
        `;
          summaryContainer.appendChild(newRow);

          totalPayable += row.charges;
        }

        let orderData = localStorage.getItem("orderData");
        orderData = JSON.parse(orderData);
        orderData.totalPayable = totalPayable;

        // Store the summary data in local storage
        localStorage.setItem("orderData", JSON.stringify(orderData));

        const totalAmount = document.getElementById("total-amount");
        totalAmount.textContent = `Total Amount: $${totalPayable}`;
      }

      // Event listener for page load
      window.addEventListener("load", () => {
        displaySummaryTable();
      });

      function verifyCardDetails() {
        const cardNumber = document.getElementById("card-number");
        const expiryDate = document.getElementById("expiry-date");
        const cvc = document.getElementById("cvc");
        const nameOnCard = document.getElementById("name-on-card");

        if (!cardNumber.value) {
          alert("Please enter card number");
          return false;
        } else {
          const cardNumberRegex = /^[0-9]{16}$/;
          if (!cardNumberRegex.test(cardNumber.value)) {
            alert("Please enter a valid card number");
            return false;
          }
        }

        if (!expiryDate.value) {
          alert("Please enter expiry date");
          return false;
        } else {
          const expiryDateRegex = /^[0-9]{2}\/[0-9]{2}$/;
          if (!expiryDateRegex.test(expiryDate.value)) {
            alert("Please enter a valid expiry date");
            return false;
          } else {
            const expiryMonth = expiryDate.value.split("/")[0];
            const expiryYear = expiryDate.value.split("/")[1];
            const currentYear = new Date().getFullYear().toString().substr(-2);
            const currentMonth = new Date().getMonth() + 1;

            if (expiryYear < currentYear) {
              alert("Card has expired");
              return false;
            } else if (expiryYear == currentYear && expiryMonth < currentMonth) {
              alert("Card has expired");
              return false;
            }
          }
        }

        if (!cvc.value) {
          alert("Please enter CVC / CVV");
          return false;
        } else {
          const cvcRegex = /^[0-9]{3}$/;
          if (!cvcRegex.test(cvc.value)) {
            alert("Please enter a valid CVC / CVV");
            return false;
          }
        }

        if (!nameOnCard.value) {
          alert("Please enter name on card");
          return false;
        } else {
          const nameOnCardRegex = /^[a-zA-Z ]+$/;
          if (!nameOnCardRegex.test(nameOnCard.value)) {
            alert("Please enter a valid name on card");
            return false;
          }
        }

        return true;
      }

      // Event listener for form submission
      const paymentForm = document.getElementById("payment-form");
      paymentForm.addEventListener("submit", (event) => {
        event.preventDefault();

        if (!verifyCardDetails()) {
          return;
        }

        // Process the payment and perform necessary actions
        // You can add your payment processing logic here

        // Clear the summary data from local storage
        localStorage.removeItem("summaryData");

        // Redirect to a success page or perform other actions
        window.location.href = "confirmation-page.html";
      });
      function toggleNav() {
  var navbarList = document.getElementById("navbarList");
  if (navbarList.style.display === "block") {
    navbarList.style.display = "none";
  } else {
    navbarList.style.display = "block";
  }
}
    </script>
  </body>
</html>
